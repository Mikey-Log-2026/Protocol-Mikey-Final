<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiKey Log | ふわふわモノづくり日記</title>
    <style>
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #fff; /* 背景を明るい色に */
            color: #4a4a4a; /* 文字色を落ち着いたグレーに */
            font-family: 'HiraMaruProN-W4', 'ヒラギノ丸ゴ ProN W4', Meiryo, sans-serif; /* 丸いフォントで優しく */
            overflow: hidden; 
        }

        #bg-image { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            object-fit: cover; opacity: 0.7; /* 背景は少し明るく控えめに */
            transition: opacity 1.5s ease-in-out; 
            filter: brightness(1.0) contrast(1.0); /* フィルターをリセット */
            z-index: 1; 
        }

        #overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: linear-gradient(to bottom, transparent 30%, rgba(255,255,255,0.7) 100%); 
            z-index: 2; pointer-events: none; 
        }

        #content { 
            position: relative; z-index: 10; height: 100%; 
            display: flex; flex-direction: column; justify-content: flex-end; 
            padding: 30px; box-sizing: border-box; 
        }

        #terminal-text { 
            font-size: 1.5rem; line-height: 1.7; min-height: 5em; margin-bottom: 25px; 
            color: #6a0dad; /* ちょっと可愛いパープルに */
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2); /* 優しめの影 */
            white-space: pre-wrap;
            background: rgba(255, 255, 255, 0.8); /* 文字背景は明るく */
            padding: 20px;
            border-radius: 15px; /* 角を丸く */
            border: 2px dashed #ff99cc; /* ドットの可愛い枠線 */
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        button { 
            background: #ff69b4; /* 可愛いピンク */
            color: #fff; 
            border: none; padding: 15px 35px; font-size: 1.2rem; 
            cursor: pointer; border-radius: 30px; /* 超丸く */
            font-weight: bold; transition: 0.3s; letter-spacing: 1px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        button:hover { 
            transform: translateY(-3px) scale(1.02); /* ふわっと浮く感じ */
            background: #ffb4dd; 
        }
    </style>
</head>
<body>
    
    <img id="bg-image" src="img_4844.jpg">
    
    <div id="overlay"></div>
    <div id="content">
        <div id="terminal-text">MiKey Logへようこそ！ 私のへっぽこモノづくり日記、一緒に覗いていきませんか？</div>
        <div class="btn-container">
            <button id="main-btn" onclick="runProtocol()">物語を始める！</button>
        </div>
    </div>

<script>
    let phase = 0;
    
    // 笑えて心が豊かになる、優しい言葉にしました
    const story = [
        { text: "ひっそり夜中。私だけの秘密の時間。\n今日の相棒は、このキラキラ部品たち！", img: "img_4844.jpg" },
        { text: "ちっちゃな線を、ちまちま繋いで…\n「これって、未来に繋がってる？」って想像すると、ワクワクが止まらない！", img: "img_4845.PNG" },
        { text: "あちゃー！また動かない！\nでも大丈夫、失敗は「成功への可愛い回り道」だもんね！", img: "img_4846.jpg" },
        { text: "「あれ？どこに書いたっけ？」\n過去の私からのメッセージ（設計図）を必死で解読中！", img: "img_4847.jpg" },
        { text: "やったー！ピカッと光ったよ！\n自分の手で動かすって、なんだか心がポカポカするね。", img: "img_4856.PNG" },
        { text: "次の「ひらめき」は何かな？\nモノづくりって、毎日が新しい発見の連続！また一緒に遊ぼうね！", img: "img_4857.PNG" }
    ];

    function speakText(text) {
        if (!window.speechSynthesis) return;
        window.speechSynthesis.cancel();
        const uttr = new SpeechSynthesisUtterance(text);
        uttr.lang = 'ja-JP';
        uttr.rate = 1.0;
        window.speechSynthesis.speak(uttr);
    }

    function typeWriter(text, i, fnCallback) {
        if (i < text.length) {
            // > を削除して、セリフのように自然な表示に
            document.getElementById('terminal-text').innerHTML = text.substring(0, i+1).replace(/\n/g, "<br>");
            setTimeout(() => typeWriter(text, i + 1, fnCallback), 70); // タイピング速度を少しゆっくりに
        } else if (fnCallback) {
            setTimeout(fnCallback, 2500); // 次のセリフまでの間隔を少し長めに
        }
    }

    function runProtocol() {
        const btn = document.getElementById('main-btn');
        btn.style.visibility = 'hidden';

        if (phase >= story.length) { 
            location.reload(); 
            return; 
        }
        
        const data = story[phase];
        speakText(data.text.replace(/\n/g, ""));

        const img = document.getElementById('bg-image');
        img.style.opacity = 0;
        
        setTimeout(() => {
            img.src = data.img;
            img.onload = () => { img.style.opacity = 0.7; };
        }, 300);

        typeWriter(data.text, 0, () => {
            btn.style.visibility = 'visible';
            btn.innerText = (phase === story.length - 1) ? "もう一度遊ぶ！" : "次の冒険へ！";
            phase++;
        });
    }
</script>
</body>
</html>
