<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mikey Log | Behind the Scenes</title>
    <style>
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #000; color: #00e5ff; 
            font-family: 'Hiragino Kaku Gothic ProN', sans-serif; 
            overflow: hidden; 
        }

        #bg-image { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            object-fit: cover; opacity: 0.85; 
            transition: opacity 1.5s ease-in-out; 
            filter: brightness(0.9) contrast(1.1); 
            z-index: 1; 
        }

        #overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: linear-gradient(to bottom, transparent 40%, rgba(0,0,0,0.9) 100%); 
            z-index: 2; pointer-events: none; 
        }

        #content { 
            position: relative; z-index: 10; height: 100%; 
            display: flex; flex-direction: column; justify-content: flex-end; 
            padding: 40px; box-sizing: border-box; 
        }

        #terminal-text { 
            font-size: 1.3rem; line-height: 1.7; min-height: 5em; margin-bottom: 30px; 
            text-shadow: 0 0 10px #00e5ff; white-space: pre-wrap;
            border-left: 4px solid #00e5ff; padding-left: 20px;
        }

        button { 
            background: transparent; color: #00e5ff; 
            border: 2px solid #00e5ff; padding: 15px 40px; font-size: 1rem; 
            cursor: pointer; border-radius: 4px; 
            font-weight: bold; transition: 0.3s; letter-spacing: 1px;
        }

        button:hover { background: rgba(0, 229, 255, 0.2); box-shadow: 0 0 20px #00e5ff; }
    </style>
</head>
<body>
    
    <img id="bg-image" src="img_4844.jpg">
    
    <div id="overlay"></div>
    <div id="content">
        <div id="terminal-text">Mikey's Workshop... ログを開始します。</div>
        <div class="btn-container">
            <button id="main-btn" onclick="runProtocol()">のぞいてみる</button>
        </div>
    </div>

<script>
    let phase = 0;
    
    // 絵に合わせて「作者のつぶやき」風の内容にしました
    const story = [
        { text: "今夜の相棒はこれ。まずは電源を入れて、\n一日の始まりとモノづくりの始まりを重ねます。", img: "img_4844.jpg" },
        { text: "基板の上に、小さな部品を一つずつ。 \nここが、想像を形にするための一番大事な場所です。", img: "img_4845.PNG" },
        { text: "指先に集中して。複雑な回路を組んでいくと、\nパズルが解けていくような楽しさがあります。", img: "img_4846.jpg" },
        { text: "設計図（ログ）をじっくり読み解く。 \n失敗しても、この紙の中に必ずヒントが隠れています。", img: "img_4847.jpg" },
        { text: "ディスプレイが光り、システムが動き出しました。\nこの瞬間を味わうために、モノづくりをやめられません。", img: "img_4856.PNG" },
        { text: "さて、次はどんな「面白いこと」をしましょうか。\nMikey Log、また更新します。お楽しみに！", img: "img_4857.PNG" }
    ];

    function speakText(text) {
        if (!window.speechSynthesis) return;
        window.speechSynthesis.cancel();
        const uttr = new SpeechSynthesisUtterance(text);
        uttr.lang = 'ja-JP';
        uttr.rate = 1.0;
        window.speechSynthesis.speak(uttr);
    }

    function typeWriter(text, i, fnCallback) {
        if (i < text.length) {
            document.getElementById('terminal-text').innerHTML = "> " + text.substring(0, i+1).replace(/\n/g, "<br>> ");
            setTimeout(() => typeWriter(text, i + 1, fnCallback), 50);
        } else if (fnCallback) {
            setTimeout(fnCallback, 2000);
        }
    }

    function runProtocol() {
        const btn = document.getElementById('main-btn');
        btn.style.visibility = 'hidden';

        if (phase >= story.length) { 
            location.reload(); 
            return; 
        }
        
        const data = story[phase];
        speakText(data.text.replace(/\n/g, ""));

        const img = document.getElementById('bg-image');
        img.style.opacity = 0;
        
        setTimeout(() => {
            img.src = data.img;
            img.onload = () => { img.style.opacity = 0.85; };
        }, 300);

        typeWriter(data.text, 0, () => {
            btn.style.visibility = 'visible';
            btn.innerText = (phase === story.length - 1) ? "最初から見る" : "次へ進む";
            phase++;
        });
    }
</script>
</body>
</html>
