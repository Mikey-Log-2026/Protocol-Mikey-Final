<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiKey Log | ふわふわモノづくり日記</title>
    <style>
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: #000; /* 背景を黒にして画像を引き立てます */
            color: #4a4a4a; 
            font-family: 'HiraMaruProN-W4', 'ヒラギノ丸ゴ ProN W4', Meiryo, sans-serif; 
            overflow: hidden; 
        }

        /* 画像をハッキリくっきりさせました！ */
        #bg-image { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            object-fit: cover; 
            opacity: 1.0; /* 透明度なし！ハッキリ見えます */
            transition: opacity 1.0s ease-in-out; 
            filter: brightness(1.0) contrast(1.1); /* 明るさ全開 */
            z-index: 1; 
        }

        /* 文字を見やすくするための薄いベール */
        #overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: linear-gradient(to bottom, transparent 20%, rgba(255,255,255,0.4) 100%); 
            z-index: 2; pointer-events: none; 
        }

        #content { 
            position: relative; z-index: 10; height: 100%; 
            display: flex; flex-direction: column; justify-content: flex-end; 
            padding: 30px; box-sizing: border-box; 
        }

        /* メッセージボックス */
        #terminal-text { 
            font-size: 1.4rem; line-height: 1.7; min-height: 5em; margin-bottom: 25px; 
            color: #5d2a8e; /* 読みやすい濃いめのパープル */
            white-space: pre-wrap;
            background: rgba(255, 255, 255, 0.9); /* ボックスは少し透かして優しく */
            padding: 20px;
            border-radius: 20px; 
            border: 3px dashed #ff85b9; /* ピンクの点線で可愛く */
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            font-weight: bold;
        }

        /* ボタンをハッキリ濃いピンクに！ */
        button { 
            background: #ff1493; /* 濃いピンクで存在感アップ */
            color: #fff; 
            border: none; padding: 18px 40px; font-size: 1.3rem; 
            cursor: pointer; border-radius: 50px; 
            font-weight: bold; transition: 0.3s; letter-spacing: 2px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }

        button:hover { 
            transform: scale(1.05); 
            background: #ff69b4; 
        }
    </style>
</head>
<body>
    
    <img id="bg-image" src="img_4844.jpg">
    
    <div id="overlay"></div>
    <div id="content">
        <div id="terminal-text">MiKey Logへようこそ！<br>私のワクワクなモノづくり、のぞいていってくださいね♪</div>
        <div class="btn-container">
            <button id="main-btn" onclick="runProtocol()">物語をはじめる！</button>
        </div>
    </div>

<script>
    let phase = 0;
    
    const story = [
        { text: "しずかな夜。私だけのひみつ時間。\nきらきらの部品たちに囲まれて、今日は何を作ろうかな？", img: "img_4844.jpg" },
        { text: "一本ずつ、心をこめて線をむすびます。\n小さなパーツが「命」になっていく、この瞬間が大好き！", img: "img_4845.PNG" },
        { text: "あらら！うまくいかないぞ？\nでも大丈夫。失敗は、新しい発見へのプレゼントなんだから！", img: "img_4846.jpg" },
        { text: "「あれれ、ヒントはどこかな～？」\n昔の私が書いたメモを、宝探しみたいに読み解きます。", img: "img_4847.jpg" },
        { text: "やったー！ピカッと光った！\n自分の手で動かせたときの感動で、心がぽかぽかになります。", img: "img_4856.PNG" },
        { text: "次はどんな「ふしぎ」を作ろうかな？\nモノづくりって、本当に楽しい！また遊びに来てね！", img: "img_4857.PNG" }
    ];

    function speakText(text) {
        if (!window.speechSynthesis) return;
        window.speechSynthesis.cancel();
        const uttr = new SpeechSynthesisUtterance(text);
        uttr.lang = 'ja-JP';
        uttr.rate = 1.0;
        window.speechSynthesis.speak(uttr);
    }

    function typeWriter(text, i, fnCallback) {
        if (i < text.length) {
            document.getElementById('terminal-text').innerHTML = text.substring(0, i+1).replace(/\n/g, "<br>");
            setTimeout(() => typeWriter(text, i + 1, fnCallback), 60);
        } else if (fnCallback) {
            setTimeout(fnCallback, 2000);
        }
    }

    function runProtocol() {
        const btn = document.getElementById('main-btn');
        btn.style.visibility = 'hidden';

        if (phase >= story.length) { 
            location.reload(); 
            return; 
        }
        
        const data = story[phase];
        speakText(data.text.replace(/\n/g, ""));

        const img = document.getElementById('bg-image');
        img.style.opacity = 0;
        
        setTimeout(() => {
            img.src = data.img;
            img.onload = () => { img.style.opacity = 1.0; };
        }, 300);

        typeWriter(data.text, 0, () => {
            btn.style.visibility = 'visible';
            btn.innerText = (phase === story.length - 1) ? "もう一度あそぶ！" : "次のページへ！";
            phase++;
        });
    }
</script>
</body>
</html>
